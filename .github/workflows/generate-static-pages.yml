name: Generate static pages

on:
        push: 
                branches:
                        - master

        pull_request:
                branches:
                        - master

jobs:
        build:
                name: buildout
                runs-on: ubuntu-latest

                steps:
                - name: Checkout latest master
                  uses: actions/checkout@v2
                  with: 
                        repository: almostengr/almostengrwebsite

                - name: Installing Python
                  run:  python -m pip install --upgrade pip
          
                - name: Installing Mkdocs
                  run:  python -m pip install mkdocs
          
                - name: Fetching branches
                  run:  git fetch -p
          
                - name: Checking out gh-pages branch
                  run:  git checkout -b gh-pages origin/gh-pages
          
                - name: Checking out master branch
                  run:  git checkout master
                   
                - name: Building static site
                  run:  python -m mkdocs gh-deploy
