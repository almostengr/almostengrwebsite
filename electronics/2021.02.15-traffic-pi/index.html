<!doctype html>
<html lang="en" data-bs-theme="auto">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="The blog of Kenny Robinson">
  <meta name="author" content="Kenny Robinson, @almostengr">
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="The Almost Engineer" />
  <meta name="theme-color" content="#712cf9" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="" />
  <meta name="twitter:creator" content="" />
  <meta name="robots" content="index, follow" />

  
  <title>Raspberry Pi Traffic Light Controller (TrafficPi) | The Almost Engineer, the blog of Kenny Robinson</title>
  

  
  <meta name="description" content="Project build using a Raspberry Pi to control a retired traffic light.">
  <meta property="og:description" content="Project build using a Raspberry Pi to control a retired traffic light." />
  <meta name="twitter:description" content="Project build using a Raspberry Pi to control a retired traffic light." />
  

  

  

  

  
  <link rel="canonical" href="https://thealmostengineer.com/electronics/2021.02.15-traffic-pi/">
  <meta property="og:url" content="https://thealmostengineer.com/electronics/2021.02.15-traffic-pi/" />
  <meta property="twitter:url" content="https://thealmostengineer.com/electronics/2021.02.15-traffic-pi/" />
  

  
  <meta name="author" content="Kenny Robinson, @almostengr">
  

  

  <link rel="canonical" href="https://thealmostengineer.com/electronics/2021.02.15-traffic-pi/" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link href="/css/bootstrap.min.css" rel="stylesheet" />
  <link href="/css/prism.min.css" rel="stylesheet" />
  <link href="/css/site5.css" rel="stylesheet" />

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="//www.googletagmanager.com/gtag/js?id="></script>
  <script async>
    window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-64643711-1');
  </script>
</head>

<body>
  
  
  <a name="#top"></a>
<svg xmlns="http://www.w3.org/2000/svg" class="d-none">
    <symbol id="check2" viewBox="0 0 16 16">
        <path
            d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z">
        </path>
    </symbol>
    <symbol id="circle-half" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path>
    </symbol>
    <symbol id="moon-stars-fill" viewBox="0 0 16 16">
        <path
            d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z">
        </path>
        <path
            d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z">
        </path>
    </symbol>
    <symbol id="sun-fill" viewBox="0 0 16 16">
        <path
            d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z">
        </path>
    </symbol>
    <symbol id="search" viewBox="0 0 16 16">
        <path
            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
    </symbol>
    <symbol id="codesquare" viewBox="0 0 16 16">
        <path
            d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
        <path
            d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0m2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0" />
    </symbol>
    <symbol id="cpu-fill" viewBox="0 0 16 16">
        <path d="M6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5z" />
        <path
            d="M5.5.5a.5.5 0 0 0-1 0V2A2.5 2.5 0 0 0 2 4.5H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2A2.5 2.5 0 0 0 4.5 14v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14a2.5 2.5 0 0 0 2.5-2.5h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14A2.5 2.5 0 0 0 11.5 2V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1zm1 4.5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3A1.5 1.5 0 0 1 6.5 5" />
    </symbol>
</svg>
<div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
    <button class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button"
        aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (auto)">
        <svg class="bi my-1 theme-icon-active" aria-hidden="true">
            <use href="#circle-half"></use>
        </svg>
        <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
    </button>
    <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light"
                aria-pressed="false">
                <svg class="bi me-2 opacity-50" aria-hidden="true">
                    <use href="#sun-fill"></use>
                </svg>
                Light
                <svg class="bi ms-auto d-none" aria-hidden="true">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark"
                aria-pressed="false">
                <svg class="bi me-2 opacity-50" aria-hidden="true">
                    <use href="#moon-stars-fill"></use>
                </svg>
                Dark
                <svg class="bi ms-auto d-none" aria-hidden="true">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto"
                aria-pressed="true">
                <svg class="bi me-2 opacity-50" aria-hidden="true">
                    <use href="#circle-half"></use>
                </svg>
                Auto
                <svg class="bi ms-auto d-none" aria-hidden="true">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
    </ul>
</div>
<!-- <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
    <symbol id="arrow-right-circle" viewBox="0 0 16 16">
        <path
            d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z">
        </path>
    </symbol>
    <symbol id="bootstrap" viewBox="0 0 118 94">
        <title>Bootstrap</title>
        <path fill-rule="evenodd" clip-rule="evenodd"
            d="M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z">
        </path>
    </symbol>
</svg> -->
<nav class="navbar navbar-expand-md navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand fw-bold text-light" href="/">
      Kenny Robinson
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
      aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav ms-auto mb-2 mb-md-0">
        <li class="nav-item"><a class="nav-link active" href="/web-development">Web Development</a></li>
        <li class="nav-item"><a class="nav-link active" href="/electronics">Electronics</a></li>
        <li class="nav-item"><a class="nav-link active" href="/tech-library">Tech Library</a></li>
        <li class="nav-item"><a class="nav-link active" href="/projects">Projects</a></li>
        <li class="nav-item"><a class="nav-link active" href="/services">Services</a></li>
        <li class="nav-item"><a class="nav-link active" href="/contact">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  
  <div class="row">
    <main class="col-12 col-md-9">
      <div class="my-3">
    <div class="p-3 page-header rounded-3">
        <h1 class="fw-bold">Raspberry Pi Traffic Light Controller (TrafficPi)</h1>
        <div class="row">
            
            
        </div>
        
        
        <div class="px-4 py-2">
            Project build using a Raspberry Pi to control a retired traffic light.
        </div>
        
    </div>
</div>
      

      
      <div class="mb-3">
        
        
        
      </div>

      <p><img alt="Traffic light" src="/images/portfolio_trafficlight2.jpg" /></p>
<h2 id="solution">Solution</h2>
<p>The purpose of this project is to educate children about the STEM (Science, Technology,
Engineering, and Mathematics) fields. Through the use of low cost devices and effective
teaching, children are able to associate what they are learning with interactions with
everyday items. For example, most future engineers are aware of the purpose of a traffic light,
but most are not aware of a traffic lights' internal workings. This project is designed
to educate future engineers about the impact that computers and computer programming has with
society. This project targets the "T, E, and M" of "STEM" by using electronic circuits
for controlling the lights, software for controlling the electronic circuits, and
mathematical calculations for making timing decisions.</p>
<p>One of the goals of this project is to be able to teach the next generation of
engineers about the programming, software versioning, and how valuable engineers and
technologists are to society and the impact that they have.
A game was developed to be combined with this project to teach about software versioning,
how sometimes Software Developers don't get it right the first time, and the
negative impact that can occur if they don't get it right the first time.</p>
<p>Below is the image of a group of future engineers working their way to developing the
psuedocode for a normal traffic cycle. As shown in the first version, all of the lights turned
on but never turned off.  In the final version, they figured out that they had to turn on
and turn off each light as well as include a delay in between each light change.</p>
<p><img alt="Image of Versioning" src="/images/versioning.jpg" /></p>
<h2 id="technology">Technology</h2>
<p>Below are the list of parts used for this project. You'll need to choose one of
the mentioned options below depending on your budget. Using LEDs is cheaper than
getting an actual traffic light.</p>
<ul>
<li>HDMI display</li>
<li>Raspiberry Pi</a></li>
<li>Micro SD card</a> (to run the OS and store project files)</li>
<li>USB keyboard</a> (mouse optional)</li>
<li>Breadboard Jumper Cables</a></li>
<li>Breadboard</a> (optional)</li>
<li>.NET 5</li>
<li>Raspberry Pi OS (has been tested with Raspberry Pi OS Jessie)</li>
</ul>
<h3 id="led-option">LED Option</h3>
<ul>
<li>Red LED</li>
<li>Yellow LED</li>
<li>Green LED</li>
</ul>
<h3 id="real-traffic-light-option">Real Traffic Light Option</h3>
<ul>
<li>Relay board(s) with at least 3 channels</li>
<li>Traffic Light</li>
</ul>
<h2 id="video-demonstration">Video Demonstration</h2>
<p>Video demonstration of version 1.0 of the project is available to be watched at
<a href="https://www.youtube.com/watch?v=lr_ZJNX0viM">https://www.youtube.com/watch?v=lr_ZJNX0viM</a>.
This version of the demonstration of the traffic light working
with an LCD screen connected.</p>
<p>Further discussion of the traffic light code can be watched at 
<a href="https://www.youtube.com/watch?v=ZyBnWOX3wGE">https://www.youtube.com/watch?v=ZyBnWOX3wGE</a>.</p>
<h2 id="controller-software">Controller Software</h2>
<p>The controller currently uses .NET 5. It is divided into two projects.</p>
<h3 id="user-interface-ui-front-end">User Interface (UI) / Front End</h3>
<p>The user interface is a .NET MVC application. When you select the program that you want to run
from the application home page, the application then runs a linux command that runs the back
end program.
When the program is changed on the front end, the back end program is then terminated and the newly
select program is started.</p>
<h3 id="relay-control-back-end">Relay Control / Back End</h3>
<p>The back end of the application is a .NET Worker Service. The program modes are defined within
this worker service. The worker service will continue running until it is terminated by the front end
application or by a user via the command line or SSH.</p>
<h2 id="controller-hardware">Controller Hardware</h2>
<h3 id="relays">Relays</h3>
<p>Relays are used when devices of different voltages or amperages are being used together. One common example
of this is relays that are used to control headlights on a car. The switch inside the vehicle has a lower
amperage and is considered to be a "signal wire". When the switch is turned on, a relay is closed
which then connects a different circuit to turn on and off the headlights.</p>
<p>In the Traffic Pi project, relays are used in a similar manner. The Raspberry Pi outputs 3.3VDC from the
GPIO pins. Those pins are connected to a relay board. The relay board is also connected to a 120VAC which is
needed by each of the signals. When the Pi sends an "on" signal to the relay board, the relay activates, thus
sending 120VAC from the source (in this case a wall outlet) to the signal and then corresponding signal then
turns on.</p>
<h3 id="wiring">Wiring</h3>
<p>The color of each wire always denotes its purpose. When using different color wires, you don't need to
have a tag on each wire. Instead, you create a service manual or other documentation that lists the purpose
of each wire based on its color.</p>
<p>For example, if you look a wiring harness on a car, you will notice that it has a number of wires that are
bundled together. Each of those wires has a purpose. The vehicle manufacturers create a document, often
referred to as a service manual, that lists each of the colors of the wire in the harness and their purpose.</p>
<p>With an AC circuit, there are commonly 3 wires. Black, white, and bare copper or green.
Black wire in AC circuit represents the "hot" or supply voltage.
White wire in AC Circuit represents the neutral.
Green or bare copper wire in AC Circuit represents the ground.</p>
<p>With a DC Circuit, there are two wires. Red and black.
Red wire in DC circuit represents the positive. This is the voltage that comes from the power source.
Black wire in DC circuits represents the negative. This is the voltage that goes back to the power source.</p>
<h3 id="ac-vs-dc">AC vs DC</h3>
<p>The current in an AC
system alternates between the hot and neutral wires. The frequency at which this occurs varies. In
North America (including the United States), the alternation takes place at 60 Hertz (Hz) or 60 times per second.
In other parts of the world, this alternation takes place at 50 Hz per second.
AC circuits are commonly used for items that require a lot of power to operate. These include large motors,
like the ones used in AC refrigeration and industrial machines.</p>
<p>DC circuits are commonly used for battery powered systems, electronics, and other devices
that do not require a lot of power to operate. If a device, such as a cell phone or streaming player, 
has a "power brick", then that device runs on DC power. The power brick converts the AC power to DC power 
and at the same time reduces the voltage to what the device needs.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<ul>
<li>LCD Display code for controlling the LCD display were provided from <a href="https://github.com/the-raspberry-pi-guy/lcd">https://github.com/the-raspberry-pi-guy/lcd</a>.</li>
<li>Attempts to replicate the Traffic Light Simulation created by Samuel Vidal
seen at <a href="https://www.youtube.com/watch?v=xqZRDtX64UA">https://www.youtube.com/watch?v=xqZRDtX64UA</a>
influenced this project.</li>
<li>Wifi AP configuration steps provided by
<a href="https://pimylifeup.com/raspberry-pi-wireless-access-point/">https://pimylifeup.com/raspberry-pi-wireless-access-point/</a></li>
</ul>
<h2 id="frequently-asked-questions-faqs">Frequently Asked Questions (FAQs)</h2>
<h3 id="where-did-you-get-the-traffic-light-from">Where did you get the traffic light from?</h3>
<p>Ebay. Found a seller that own a salvage company that was selling it in 2018. The item that he 
had listed, included a controller, but the controller only had like 5 programs. I opted 
to get the light without the controller as I was going to build my own using the Raspberry Pi.</p>
<h3 id="will-you-share-the-source-code-for-the-application">Will you share the source code for the application?</h3>
<p>The source code for this project is available on GitHub at
<a href="https://github.com/almostengr/trafficpi">https://github.com/almostengr/trafficpi</a></p>
<h3 id="is-the-traffic-light-heavy">Is the traffic light heavy?</h3>
<p>This one is made from plastic and weighs 25 pounds. Metal traffic lights weigh between 50 and 75 pounds.</p>
<h3 id="how-big-is-the-traffic-light">How big is the traffic light?</h3>
<p>Traffic lights come in two common sizes, 12 inch (30.48 centimeters) and 8 inch (20.32 centimeters). 
This is a 12 inch traffic light. It is about 14 inches wide and about 38 inches tall (with the base 
attached). </p>
<h2 id="traffic-control-classroom-activity">Traffic Control Classroom Activity</h2>
<h3 id="objective">Objective</h3>
<p>Programmers will have to come up with code to control the traffic lights and not cause an accident.
While doing so, they learn programming concepts and how mistakes in their programs, can impact
others significantly.</p>
<h3 id="people-needed">People Needed</h3>
<ul>
<li>1 volunteer as Traffic Light 1</li>
<li>1 volunteer as Traffic Light 2</li>
<li>1+ volunteers as programmers</li>
<li>3+ volunteers as vehicles</li>
</ul>
<h3 id="placement-of-people">Placement of People</h3>
<p><img alt="Positioning of voluters" src="/images/positioning.jpg" /></p>
<ul>
<li>Blue is programmers (control box). Audience should positioned so that they see both traffic lights.</li>
<li>Red is Traffic Light 1</li>
<li>Green is Traffic Light 2</li>
</ul>
<h3 id="goals-and-instructions">Goals and Instructions</h3>
<ul>
<li>Programmers are to come up with the code to control the traffic lights.</li>
<li>Vehicles will go through one light and circle back around to the other light.</li>
<li>Each mistake (or traffic collision) that they make means that they take the previous version of code and make corrections in the next version.<ul>
<li>To make this more challenging, programmers can be fired (and replaced with new programmers) if they make too many mistakes (or cause too many collisions).</li>
</ul>
</li>
<li>Ideally use a chalkboard or dry erase board for this so that the versioning differences can be seen.<ul>
<li>If running out of board space, previous versions can be erased. Do not erase the very first version. Once completed, this will allow a full comparison and what was done between the first and final version.</li>
</ul>
</li>
<li>Instructor will be “the internet”. If the programmers get stuck, they can ask the internet the question that they have.<ul>
<li>To make this more challenging, limit the number of questions that can be asked.</li>
</ul>
</li>
<li>Traffic lights will perform one action per command.<ul>
<li>To make this more challenging, “Light on” and “Light off” can be two separate commands.</li>
</ul>
</li>
</ul>
<h2 id="technical-information">Technical Information</h2>
<p>The sections below this one, get into the technical details of the project. Those that are interested
in setting up their own traffic light with a Raspberry Pi using the code that I have built, can 
follow the instructions below.</p>
<h2 id="installation-and-setup">Installation and Setup</h2>
<h3 id="install-raspberry-pi-operating-system-os">Install Raspberry Pi Operating System (OS)</h3>
<p>You will need to install Raspberry Pi OS on your SD. Once you have completed this install,
Then you can insert the SD card into the Raspberry Pi and power it on.</p>
<p>To install Raspberry Pi OS using Ubuntu, I made a video tutorial which you can watch
at <a href="https://www.youtube.com/watch?v=Wy1_MWWlkNI">https://www.youtube.com/watch?v=Wy1_MWWlkNI</a>.</p>
<h3 id="pin-setup">Pin Setup</h3>
<p>Below is the mapping for the connections to the Raspberry Pi. The Pin numbers
listed are the physical pin numbers on the board, not the GPIO pin numbers. If
you are not using a relay board, the connections can be made directly to a
breadboard with LEDs connected.</p>
<table>
<thead>
<tr>
<th>Pi Pin (Board)</th>
<th>GPIO</th>
<th>Device Connection</th>
</tr>
</thead>
<tbody>
<tr>
<td>04</td>
<td>--</td>
<td>Relay Board VCC (+5V)</td>
</tr>
<tr>
<td>19</td>
<td>11</td>
<td>Red Signal</td>
</tr>
<tr>
<td>21</td>
<td>09</td>
<td>Yellow Signal</td>
</tr>
<tr>
<td>23</td>
<td>10</td>
<td>Green Signal</td>
</tr>
<tr>
<td>34</td>
<td>--</td>
<td>Relay Board GND</td>
</tr>
<tr>
<td>15</td>
<td>22</td>
<td>Button (Car Sensor)</td>
</tr>
</tbody>
</table>
<h4 id="visual-of-pin-connections-to-relay-board">Visual of Pin Connections to Relay Board</h4>
<p><img alt="Image of connections on Raspberry Pi board" src="/images/circuitry.jpg" /></p>
<h3 id="system-service">System Service</h3>
<p>To set up the application as a service, run the below commands. If you see error messages
when running the commands, you may need to run them with "sudo" privileges. See the
<a href="/projects/traffic-pi/systemservice">System Service</a> page for details on how to add or remove the
application as a system service.</p>
<h4 id="create-system-service">Create System Service</h4>
<pre><code class="language-bash">sudo cp almostengrtrafficpiweb.service /lib/systemd/system
sudo systemctl daemon-reload
sudo systemctl enable almostengrtrafficpiweb.service
sudo systemctl start almostengrtrafficpiweb.service
sudo systemctl status almostengrtrafficpiweb.service
</code></pre>
<h4 id="run-app-on-pi">Run App On Pi</h4>
<p>To run the applicatoin via the command line (not using the system service), then you
can run the commands below.</p>
<pre><code class="language-bash">cd trafficpi
./Almostengr.TrafficPi.Web
</code></pre>
<p>To exit the application after running it via command line, press Ctrl+C.</p>
<h2 id="uninstall-traffic-pi">Uninstall Traffic Pi</h2>
<h3 id="remove-system-service">Remove System Service</h3>
<p>To remove the application as a system service, run each of the commands below.</p>
<pre><code class="language-bash">sudo systemctl disable almostengrtrafficpiweb.service
sudo systemctl stop almostengrtrafficpiweb.service
sudo systemctl status almostengrtrafficpiweb.service
sudo rm /lib/systemd/system/almostengrtrafficpiweb.service
</code></pre>
<p>After running all of the commands above, then reboot the system.</p>
<h3 id="application-files">Application Files</h3>
<p>To remove the application files, you can remove the entire trafficpi directory.</p>
<pre><code class="language-bash">rm -rf trafficpi
</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="system-service-output-log">System Service Output / Log</h3>
<p>To see the logged output from the system service, run the command:</p>
<pre><code class="language-bash">journalctl -u almostengrtrafficpiweb.service -b
</code></pre>
<p>or</p>
<pre><code class="language-bash">journalctl -u almostengrtrafficpiweb.service -b -f
</code></pre>
<p>If an error occurs in the application, the exception message will show here.</p>
      
      
    </main>
    
    <div class="col-12 col-md-3 mt-3">
      <aside class="blog-sidebar">
        <div class="p-4 mb-3 rounded shadow">
          <form class="d-flex" role="search" action="https://www.google.com/search" method="get">
            <div class="input-group">
              <input type="hidden" name="q" value="site:thealmostengineer.com">
              <input type="text" class="form-control rounded" placeholder="Search with Google" aria-label="Search"
                aria-describedby="search-button" name="q">
              <button class="btn btn-dark border-1 border-light" type="submit" id="search-button">Search</button>
            </div>
          </form>
        </div>
        <div class="p-4 shadow mb-3">
          <h4 class="font-italic">Get Into Tech</h4>
          <p class="mb-0">
            Are you looking to get into a tech career or role? Check out the
            <a href="/resources">Resources</a> section for more information. Also check out my
            <a href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1" target="_blank">
              YouTube Channel</a> and
            <a href="https://www.facebook.com/profile.php?id=100089303142244" target="_blank">Facebook page</a> for
            video tutorials about software development, web development,
            and working with tech.
            </a>
          </p>
        </div>
        <div class="p-4 shadow mb-3">
          <h4 class="font-italic">Monthly Newsletter</h4>
          <p class="mb-0">
            Get the latest posts and video delivered directly to your Inbox. Sign up for the mailing list. You will
            receive, at most, one email per month with the latest updates.
          </p>
          <p class="mt-2">
            <a class="text-light text-decoration-none btn btn-dark text-light mt-3"
              href="https://newsletter.thealmostengineer.com/?p=subscribe&id=1">JOIN THE MAILING LIST</a>
          </p>
        </div>
        <div class="p-4 shadow mb-3">
          <h4 class="font-italic">Connect with Me</h4>
          <ol class="list-unstyled">
            <li><a target="_blank" href="https://bsky.app/profile/almostengr.bsky.social">
                <i class="bi bi-bluesky"></i> Blue Sky</a></li>
            <li><a target="_blank" href="https://www.facebook.com/profile.php?id=100089303142244">
                <i class="bi bi-facebook"></i> Facebook</a></li>
            <li><a target="_blank" href="https://github.com/almostengr">
                <i class="bi bi-github"></i> Github</a></li>
            <li><a target="_blank" href="https://instagram.com/almostengr">
                <i class="bi bi-instagram"></i> Instagram</a></li>
            <li><a target="_blank" href="https://stackoverflow.com/users/12875554/almostengr">
                <i class="bi bi-stack-overflow"></i> StackOverflow</a></li>
            <li><a target="_blank" href="https://www.tiktok.com/@almostengr">
                <i class="bi bi-tiktok"></i> TikTok</a></li>
            <li><a target="_blank" href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1">
                <i class="bi bi-youtube"></i> YouTube</a></li>
          </ol>
        </div>
        <div class="p-4 shadow mb-3">
          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4218270188842097"
            data-ad-slot="5189305512" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>
      </aside>
    </div>
    
  </div>
  
</div>
<div class="container sidebar rounded p-5 my-2 shadow">
  <div class="row text-center">
    <h3 class="col-12 col-md-4 text-center mb-2 mb-md-0">
      <div>SHARE THE KNOWLEDGE</div>
      <div>JOIN THE COMMUNITY</div>
    </h3>
    <div class="col-12 col-md-4 text-center mb-2 mb-md-0">
      Whether you are just getting started in tech, or seasoned professional looking to share
      your knowledge, join the community with other like minded individuals.
    </div>
    <div class="col-12 col-md-4 text-center mb-2 mb-md-0">
      <a class="text-decoration-none text-light btn btn-lg btn-dark p-2" href="https://forums.thealmostengineer.com"
        target="_blank">JOIN THE DISCUSSION</a>
    </div>
  </div>
</div>
<div class="container my-2 small">
  <a href="#top">Back to Top</a>
</div>
<footer class="pt-2 my-5 text-body border-top blog-footer">
  <div class="container">
    <div class="mb-3">
      <a class="pe-2" href="/web-development">Web Development</a>
      <a class="pe-2" href="/electronics">Electronics</a>
      <a class="pe-2" href="/tech-library">Tech Library</a>
      <a class="pe-2" href="/dad-life">Dad Life</a>
      <a class="pe-2" href="/junk-drawer">Junk Drawer</a>
      <a class="pe-2" href="/gardening">Gardening</a>
      <a class="pe-2" href="/projects">Projects</a>
      <a class="pe-2" href="/services">Services</a>
      <a class="pe-2" href="/about">About</a>
      <a class="pe-2" href="/contact">Contact</a>
    </div>
    <div class="mb-3">
      <a class="pe-2" target="_blank" href="https://bsky.app/profile/almostengr.bsky.social"><i
          class="bi bi-bluesky"></i> Blue Sky</a>
      <a class="pe-2" target="_blank" href="https://www.facebook.com/profile.php?id=100089303142244"><i
          class="bi bi-facebook"></i> Facebook</a>
      <a class="pe-2" target="_blank" href="https://github.com/almostengr"><i class="bi bi-github"></i> Github</a>
      <a class="pe-2" target="_blank" href="https://instagram.com/almostengr"><i class="bi bi-instagram"></i>
        Instagram</a>
      <a class="pe-2" target="_blank" href="https://stackoverflow.com/users/12875554/almostengr"><i
          class="bi bi-stack-overflow"></i> StackOverflow</a>
      <a class="pe-2" target="_blank" href="https://www.tiktok.com/@almostengr"><i class="bi bi-tiktok"></i> TikTok</a>
      <a class="pe-2" target="_blank"
        href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1"><i class="bi bi-youtube"></i>
        YouTube</a>
      <a class="pe-2" target="_blank"
        href="https://www.youtube.com/channel/UCB7rvymUaUbbig3skv2zvCQ?sub_confirmation=1">Kenny Ram Dash Cam</a>
    </div>
    <div class="mb-3">
      <a class="pe-2" href="https://newsletter.thealmostengineer.com">Newsletter</a>
      <a class="pe-2" href="https://forums.thealmostengineer.com" target="_blank">Tech Forums</a>
      <a class="pe-2" href="/rss">RSS Feeds</a>
      <a class="pe-2" href="/links">Links</a>
      <a class="pe-2" href="/lightshow">Light Show</a>
      <a class="pe-2" href="/uses">Uses</a>
      <a class="pe-2" href="/privacy">Privacy Policy</a>
      <a class="pe-2" href="/sitemap.xml">Sitemap</a>
    </div>
    <div class="mb-3">
      Copyright &copy; 2010-2026 Kenny Robinson |
      Created by <a href="https://rhtservices.net" target="_blank">Robinson Handy and Technology
        Services</a>
    </div>
    <div class="mb-3">
      Disclaimer: The opinions expressed here are those of mine and not representative of my employer or
      affiliates.
    </div>
  </div>
</footer>
<script src="/js/bootstrap.bundle.min.js" class="astro-vvvwv3sm"></script>
<script src="/js/color-modes.js"></script>
<script src="/js/prism.js"></script>
<script src="/js/site.js"></script>
  
  
</body>

</html>