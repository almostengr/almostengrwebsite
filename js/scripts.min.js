function getHeaders(){return{"Content-Type":"application/json"}}async function submitJukeboxRequest(){alertBody.classList.add(dNone);try{const e=new FormData(jukeboxForm),t=Object.fromEntries(e),n=await fetch(jukeboxRoute,{method:"POST",headers:getHeaders(),body:JSON.stringify(t)}),s=await n.json();if(alertText.innerText=s.message,n.status>299)throw new Error(s.message);alertBody.classList.remove(dangerClass),alertBody.classList.add(successClass)}catch(e){alertBody.classList.remove(successClass),alertBody.classList.add(dangerClass)}alertBody.classList.remove(dNone)}async function getAllSettings(){if(null!=songNameElement)try{let e=await fetch(jukeboxRoute,{method:"GET",headers:getHeaders()});if(e.status>299)throw new Error(t.message);let t=await e.json();t.forEach(e=>{let t=32,n=0;switch(e.identifier){case"currentsong":if(""==e.value){showOffline.classList.remove(dNone),currentSongMetaData.classList.add(dNone),jukeboxForm.classList.add(dNone);break}const s=e.value.split("|");songNameElement.innerText=s[0],artistElement.innerText=null==s[1]?"":s[1],showOffline.classList.add(dNone),currentSongMetaData.classList.remove(dNone),jukeboxForm.classList.remove(dNone);break;case"cputempc":t=getFahrenheit(e.value),n=getCelsius(e.value),controllerTempElement.innerText=`${t} F (${n} C)`;break;case"nwstempc":t=getFahrenheit(e.value),n=getCelsius(e.value),nwsTempElement.innerText=`${t} F (${n} C)`;break;case"queuecount":queueCount.innerText=""==artistElement.innerText?0:e.value;break;case"windchill":t=getFahrenheit(e.value),n=getCelsius(e.value),windChillElement.innerText=""==e.value?"None":`${t} F (${n} C)`}}),songNameElement.classList.remove(textDanger)}catch(e){songNameElement.innerText=e,songNameElement.classList.add(textDanger)}}function getFahrenheit(e){const t=parseFloat(e),n=1.8*t+32;return Math.round(n)}function getCelsius(e){const t=parseFloat(e);return Math.round(t)}const jukeboxRoute="/jukeboxapi.php",successClass="alert-success",dangerClass="alert-danger",dNone="d-none",songNameElement=document.getElementById("currentSong"),jukeboxForm=document.getElementById("jukeboxForm"),artistElement=document.getElementById("currentArtist"),controllerTempElement=document.getElementById("controllerTemp"),nwsTempElement=document.getElementById("nwsTemp"),queueCount=document.getElementById("songQueue"),windChillElement=document.getElementById("windchill"),showOffline=document.getElementById("showOffline"),currentSongMetaData=document.getElementById("currentSongMetaData"),textDanger="text-danger";getAllSettings();const intervalDelay=7e3;setInterval(getAllSettings,intervalDelay);