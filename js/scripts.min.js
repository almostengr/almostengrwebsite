function getHeaders(){return{"Content-Type":"application/json"}}async function submitJukeboxRequest(){const e=document.getElementById("alertBody"),t=document.getElementById("alertText"),n=document.getElementById("jukeboxForm");try{const s=new FormData(n),a=Object.fromEntries(s);e.classList.add(dNone);const o=await fetch(jukeboxRoute,{method:"POST",headers:getHeaders(),body:JSON.stringify(a)}),r=await o.json();if(o.status>299)throw new Error(r.message);t.innerText=r.message,e.classList.remove(dangerClass),e.classList.add(successClass)}catch(n){t.innerText=n,e.classList.remove(successClass),e.classList.add(dangerClass)}e.classList.remove(dNone)}async function getAllSettings(){if(null==songNameElement)return;try{const e="text-danger",t=await fetch(jukeboxRoute,{method:"GET",headers:getHeaders()});if(t.status>299)throw new Error(n.message);const n=await t.json(),s=document.getElementById("jukeboxForm"),a=document.getElementById("currentArtist"),o=document.getElementById("controllerTemp"),r=document.getElementById("nwsTemp"),l=document.getElementById("songQueue"),c=document.getElementById("windchill"),u=document.getElementById("showOffline"),d=document.getElementById("currentSongMetaData");n.forEach(e=>{let t=32,n=0;switch(e.identifier){case"currentsong":if(""==e.value){u.classList.remove(dNone),d.classList.add(dNone),s.classList.add(dNone);break}var i=e.value.split("|");songNameElement.innerText=i[0],a.innerText=null==i[1]?"":i[1],u.classList.add(dNone),d.classList.remove(dNone),s.classList.remove(dNone);break;case"cputempc":t=getFahrenheitFromCelsius(e.value),n=roundCelsius(e.value),o.innerText=`${t} F (${n} C)`;break;case"nwstempc":t=getFahrenheitFromCelsius(e.value),n=roundCelsius(e.value),r.innerText=`${t} F (${n} C)`;break;case"queuecount":l.innerText=""==a.innerText?0:e.value;break;case"windchill":t=getFahrenheitFromCelsius(e.value),n=roundCelsius(e.value),c.innerText=""==e.value?"None":`${t} F (${n} C)`}}),songNameElement.classList.remove(e)}catch(t){songNameElement.innerText=t,songNameElement.classList.add(e)}const e=7e3;setTimeout(getAllSettings,e)}function getFahrenheitFromCelsius(e){const t=parseFloat(e),n=1.8*t+32;return Math.round(n)}function roundCelsius(e){const t=parseFloat(e);return Math.round(t)}const jukeboxRoute="/jukeboxapi.php",successClass="alert-success",dangerClass="alert-danger",dNone="d-none",songNameElement=document.getElementById("currentSong");getAllSettings();