<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="The blog of Kenny Robinson">
  <meta name="author" content="Kenny Robinson, @almostengr">
  <meta name="generator" content="Mkdocs">

  
  <title>ESP32 Traffic Light Controller | The Almost Engineer</title>
  

  <link href="/assets/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/blog.min.css" rel="stylesheet">
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="The Almost Engineer" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="" />
  <meta name="twitter:creator" content="" />

  

  

  

  

  
  <meta name="robots" content="index, follow" />
  

  
  <link rel="canonical" href="https://thealmostengineer.com/projects/traffic-light-controller/">
  <meta property="og:url" content="https://thealmostengineer.com/projects/traffic-light-controller/" />
  <meta property="twitter:url" content="https://thealmostengineer.com/projects/traffic-light-controller/" />
  

  
  <meta name="author" content="Kenny Robinson, @almostengr">
  

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="//www.googletagmanager.com/gtag/js?id="></script>
  <script
    async>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-64643711-1');</script>
</head>

<body class="bg-dark">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark pb-2">
    <a class="navbar-brand" href="/">The Almost Engineer</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse"
      aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link text-light" href="/blog">Blog</a></li>
        <li class="nav-item"><a class="nav-link text-light" href="/projects">Projects</a></li>
        <li class="nav-item"><a class="nav-link text-light" href="/resources">Get Into Tech</a></li>
        <li class="nav-item"><a class="nav-link text-light" href="https://lightshow.thealmostengineer.com">Light Show</a></li>
      </ul>
      <form class="form-inline mt-2 mt-md-0" action="https://www.google.com/search" method="get">
        <input type="hidden" name="q" value="site:thealmostengineer.com">
        <input class="form-control mr-sm-2" type="text" placeholder="Search with Google" aria-label="Search" name="q">
      </form>
    </div>
  </nav>

  <div class="bg-light pt-3 mb-0 pb-0">
    

    
    <main role="main" class="container">
  <div class="row">
    <div class="col-md-8 blog-main">
      
      <h1>ESP32 Traffic Light Controller</h1>
      
      <h2 id="problem">Problem</h2>
<p>Pupose of this project was to replace the Raspberry Pi traffic light controller
(<a href="/projects/traffic-pi">Traffic Pi</a>) that I had created. Problem with using a Raspberry Pi 
for projects like this is that the operating system has to be constantly updated. In addition, 
Pis are known for having issues when they are not properly shut down. </p>
<h2 id="solution">Solution</h2>
<p>To reduce the risk of 
having an unexpected failure, I decided to change replace the Pi with a controller that 
ran on an ESP32. Microcontrollers are less likely to fail as they do not have the same flaws as a Raspberry 
Pi. That main flaw with a Raspberry Pi is that they have been known to corrupt the SD cards when a 
power failure occurs.</p>
<p>This project is used to tech students about software development, electrical engineering, and STEM.</p>
<h2 id="technology">Technology</h2>
<ul>
<li>C++</li>
<li>ESP32</li>
</ul>
<h3 id="components-used">Components Used</h3>
<ul>
<li>ESP32-WROOM-32</li>
<li>breadboard wires</li>
<li>4-channel mechanical relay board</li>
<li>14 gauge wire</li>
<li>Econolite 12 inch traffic signal</li>
</ul>
<h2 id="controller-software">Controller Software</h2>
<p>The code for the controller is written in C++. It is compiled and loaded onto the ESP32 using the 
Arduino IDE. </p>
<h2 id="controller-hardware">Controller Hardware</h2>
<h3 id="relays">Relays</h3>
<p>Relays are used when devices of different voltages or amperages are being used together. One common example
of this is relays that are used to control headlights on a car. The switch inside the vehicle has a lower
amperage and is considered to be a "signal wire". When the switch is turned on, a relay is closed
which then connects a different circuit to turn on and off the headlights.</p>
<p>In this project, relays are used in a similar manner. The ESP32 outputs 3.3VDC from the
GPIO pins. Those pins are connected to a relay board. The relay board is also connected to a 120VAC which is
needed by each of the signals. When the ESP32 sends an "on" signal to the relay board, the relay activates, thus
sending 120VAC from the source (in this case a wall outlet) to the signal and then corresponding signal then
turns on.</p>
<h3 id="wiring">Wiring</h3>
<p>The color of each wire always denotes its purpose. When using different color wires, you don't need to
have a tag on each wire. Instead, you create a service manual or other documentation that lists the purpose
of each wire based on its color.</p>
<p>For example, if you look a wiring harness on a car, you will notice that it has a number of wires that are
bundled together. Each of those wires has a purpose. The vehicle manufacturers create a document, often
referred to as a service manual, that lists each of the colors of the wire in the harness and their purpose.</p>
<p>With an AC circuit, there are commonly 3 wires. Black, white, and bare copper or green.
Black wire in AC circuit represents the "hot" or supply voltage.
White wire in AC Circuit represents the neutral.
Green or bare copper wire in AC Circuit represents the ground.</p>
<p>With a DC Circuit, there are two wires. Red and black.
Red wire in DC circuit represents the positive. This is the voltage that comes from the power source.
Black wire in DC circuits represents the negative. This is the voltage that goes back to the power source.</p>
<h3 id="ac-vs-dc">AC vs DC</h3>
<p>The current in an AC
system alternates between the hot and neutral wires. The frequency at which this occurs varies. In
North America (including the United States), the alternation takes place at 60 Hertz (Hz) or 60 times per second.
In other parts of the world, this alternation takes place at 50 Hz per second.
AC circuits are commonly used for items that require a lot of power to operate. These include large motors,
like the ones used in AC refrigeration and industrial machines.</p>
<p>DC circuits are commonly used for battery powered systems, electronics, and other devices
that do not require a lot of power to operate. If a device, such as a cell phone or streaming player, 
has a "power brick", then that device runs on DC power. The power brick converts the AC power to DC power 
and at the same time reduces the voltage to what the device needs.</p>

      

      <div class="text-muted py-2">
        
        <span>Updated: 2024-04-20 |</span>
        

        
        <span>Posted: 2022-08-14</span>
        
      </div>
      <div class="text-muted pb-2">
        
      </div>

      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4218270188842097" data-ad-slot="5189305512" data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div><!-- /.blog-main -->

    <aside class="col-md-4 blog-sidebar">
      <div class="p-4 mb-3 bg-light rounded shadow">
        <h4 class="font-italic">About Kenny</h4>
        <p class="mb-0">
          A software developer that builds and fixes things, and writes about the journey.
        </p>
      </div>
      <div class="p-4 shadow mb-3">
        <h4 class="font-italic">Get Into Tech</h4>
        <p class="mb-0">
          Are you looking to get into a tech career or role? Check out the
          <a href="/resources">Resources</a> section for more information. Also check out my
          <a href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1" target="_blank">
            Tech Talk YouTube Channel</a> and
          <a href="https://www.facebook.com/profile.php?id=100089303142244" target="_blank">
            Tech Talk Facebook page</a> for video tutorials about software development, web development,
          and working with tech.
          </a>
        </p>
      </div>
      <div class="p-4 shadow mb-3">
        <h4 class="font-italic">Connect with Me</h4>
        <ol class="list-unstyled">
          <li><a target="_blank" href="https://bluesky.com/almostengr.bsky.social">Blue Sky</a></li>
          <li><a target="_blank" href="https://github.com/almostengr">Github</a></li>
          <li><a target="_blank" href="https://facebook.com/rhtservicesllc">Home Improvement (Facebook)</a></li>
          <li><a target="_blank" href="https://www.youtube.com/c/RobinsonHandyandTechnologyServices?sub_confirmation=1">Home
              Improvement (YouTube)</a></li>
          <li><a target="_blank" href="https://instagram.com/almostengr">Instagram</a></li>
          <li><a target="_blank" href="https://www.youtube.com/channel/UCB7rvymUaUbbig3skv2zvCQ?sub_confirmation=1">Kenny Ram Dash Cam</a></li>
          <li><a target="_blank" href="https://stackoverflow.com/users/12875554/almostengr">StackOverflow</a></li>
          <li><a target="_blank" href="https://www.facebook.com/profile.php?id=100089303142244">Tech Talk (Facebook)</a></li>
          <li><a target="_blank" href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1">Tech Talk
              (YouTube)</a></li>
          <li><a target="_blank" href="https://www.tiktok.com/@almostengr">TikTok</a></li>
          <li><a target="_blank" href="https://twitter.com/almostengr">Twitter</a></li>
        </ol>
      </div>
      <div class="p-4 shadow mb-3">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4218270188842097" data-ad-slot="5189305512" data-ad-format="auto"
          data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      </div>
    </aside><!-- /.blog-sidebar -->
  </div><!-- /.row -->
</main><!-- /.container -->
<footer class="blog-footer bg-dark text-light text-left">
  <div class="container">
    <div>
      <a class="text-light pr-2" href="/blog">Blog</a>
      <a class="text-light pr-2" href="/projects">Projects</a>
      <a class="text-light pr-2" href="/resources">Get Into Tech</a>
      <a class="text-light pr-2" href="/services">Services</a>
      <a class="text-light pr-2" href="/blog">Food</a>
      <a class="text-light pr-2" href="/uses">Uses</a>
      <a class="text-light pr-2" href="/about">About</a>
      <a class="text-light pr-2" href="/contact">Contact</a>
      <a class="text-light pr-2" href="/privacy">Privacy Policy</a>
      <a class="text-light pr-2" href="/sitemap.xml">Sitemap</a>
    </div>
    <div>
      <a class="text-light pr-2" target="_blank" href="https://facebook.com/rhtservicesllc">Home Improvement (Facebook)</a>
      <a class="text-light pr-2" target="_blank" href="https://www.youtube.com/c/RobinsonHandyandTechnologyServices?sub_confirmation=1">Home
        Improvement (YouTube)</a>
      <a class="text-light pr-2" target="_blank" href="https://www.facebook.com/profile.php?id=100089303142244">Tech Talk (Facebook)</a>
      <a class="text-light pr-2" target="_blank" href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1">Tech Talk
        (YouTube)</a>
      <a class="text-light pr-2" target="_blank" href="https://www.youtube.com/channel/UCB7rvymUaUbbig3skv2zvCQ?sub_confirmation=1">Kenny Ram Dash
        Cam</a>
    </div>
    <div>
      <a class="text-light pr-2" target="_blank" href="https://bluesky.com/almostengr.bsky.social">Blue Sky</a>
      <a class="text-light pr-2" target="_blank" href="https://github.com/almostengr">Github</a>
      <a class="text-light pr-2" target="_blank" href="https://instagram.com/almostengr">Instagram</a>
      <a class="text-light pr-2" target="_blank" href="https://stackoverflow.com/users/12875554/almostengr">StackOverflow</a>
      <a class="text-light pr-2" target="_blank" href="https://www.tiktok.com/@almostengr">TikTok</a>
      <a class="text-light pr-2" target="_blank" href="https://twitter.com/almostengr">Twitter</a>
    </div>
    <div>Copyright &copy; 2010-2025 Kenny Robinson</div>
    <div>
      Created by <a class="text-light" href="https://rhtservices.net" target="_blank">Robinson Handy and Technology Services</a>
    </div>
    <div>
      Disclaimer: The opinions expressed here are those of mine and not representative of my employer or
      affiliates.
    </div>
  </div>
</footer>
    

  </div>
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <script type="text/javascript" src="/js/popper.min.js"></script>
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
</body>

</html>