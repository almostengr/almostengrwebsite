<!doctype html><html lang=en> <head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name=description content="The blog of Kenny Robinson"><meta name=author content="Kenny Robinson, @almostengr"><meta name=generator content=Mkdocs><title>The Almost Engineer - The blog of Kenny Robinson</title><link href=/assets/dist/css/bootstrap.min.css rel=stylesheet><link href=/css/blog.min.css rel=stylesheet><meta property=og:type content=website><meta property=og:locale content=en_US><meta property=og:site_name content="The Almost Engineer"><meta name=twitter:card content=summary><meta name=twitter:site content><meta name=twitter:creator content><meta name=description content="The blog of Kenny Robinson"><meta property=og:description content="The blog of Kenny Robinson"><meta name=twitter:description content="The blog of Kenny Robinson"><meta name=robots content="index, follow"><link href=https://thealmostengineer.com/technology/2019.07.04-when-deploying-before-testing/ rel=canonical><meta content=https://thealmostengineer.com/technology/2019.07.04-when-deploying-before-testing/ property=og:url><meta content=https://thealmostengineer.com/technology/2019.07.04-when-deploying-before-testing/ property=twitter:url><meta name=author content="Kenny Robinson, @almostengr"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="//www.googletagmanager.com/gtag/js?id="></script><script async>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-64643711-1');</script></head> <body class=bg-dark> <nav class="navbar navbar-expand-md navbar-dark bg-dark pb-2"> <a href=/ class=navbar-brand>The Almost Engineer</a> <button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> <div class="collapse navbar-collapse" id=navbarCollapse> <ul class="navbar-nav mr-auto"> <li class=nav-item><a class="nav-link text-light" href=/technology>Technology</a></li> <li class=nav-item><a class="nav-link text-light" href=/lifestyle>Living</a></li> <li class=nav-item><a class="nav-link text-light" href=/projects>Projects</a></li> <li class=nav-item><a class="nav-link text-light" href=/resources>Get Into Tech</a></li> <li class=nav-item><a class="nav-link text-light" href=https://lightshow.thealmostengineer.com>Light Show</a></li> </ul> <form class="form-inline mt-2 mt-md-0" action=https://www.google.com/search method=get> <input type=hidden name=q value=site:thealmostengineer.com> <input class="form-control mr-sm-2" type=text placeholder="Search with Google" aria-label=Search name=q> </form> </div> </nav> <div class="bg-light pt-3 mb-0 pb-0"> <main role=main class=container> <div class=row> <div class="col-md-8 blog-main"> <h1 id=when-deploying-before-testing>When Deploying Before Testing</h1> <p><img alt="Termites in wood are like bugs in code" src=/images/2019.07.04-503.jpg></p> <p>As you may know, on July 3, 2019, Facebook, Instagram, Down Detector, and a number of other websites were partially or fully unavailable. Cloudflare mentioned did admit that the outage was their fault and did rectify the situation. However, it was not resolved until a number of users complained and reported images not loading. </p> <p>Cloudflare provides CDN services. CDN stands for Content Delivery Network. Content Delivery Networks are often used by high traffic websites to be able to provide you with images, video, and other online resources faster as they are located closer to where you are. </p> <p>For instance, letâ€™s say a company has their primary data center in Utah, it may take about 5 seconds for an online image request to be sent and response to be returned to a device that is on the East Coast. However with a CDN, the image that is on the Utah server, is copied to a server in Virginia. Then when the request for that same image is made from the device on the East Coast, the image is provided from the Virginia server instead of the Utah server in about 1 or 2 seconds. This is part of the reason why it is said that if you upload and image or other content online, that you will never be able to delete it. </p> <h2 id=testing-environment>Testing Environment</h2> <p>When I primarily did IT support, we were often asked to do changes that were to be deployed in the testing environment first. Not only this, but we had to provide proof that the change being implemented in the testing environment was successful and did not destroy the testing environment before performing the change in the production environment. </p> <p>There is one major difference between the testing environment and the production environment. That is that the testing environment may get about 5% of the activity that the production environment gets unless a simulation is performed. Long story short, this change may have been tested in the testing environment and the CPU spike did not occur or was not noticeable to be classified as a failure. </p> <p>This change was probably not well tested or tested at all in a lower environment. A <em>lower environment</em> is supposed to be an exact copy of the production environment. In the lower environment, you can play around or try things out without breaking the production environment. </p> <h2 id=use-an-automation-or-script>Use An Automation or Script</h2> <p>When using an automation or script to perform work, the change is less likely to be error prone. The reason being, is that most automations are tested a number of times before being rolled out. Once rolled out, they are guaranteed to work unless an unexpected situation occurs. For instance, a software dependency is not installed, thus the automation is not able to configure the software. In this circumstance, the automation should fail and roll back what activities that it has done thus far. </p> <h2 id=work-in-batches>Work in Batches</h2> <p>It was mentioned that they noticed that the CPU usage had spiked on the primary and secondary servers. Assuming that the changes were applied at the same time, indicates a bigger problem. From my support experience, we would not deploy or make changes to all the servers at the same. What we would do is deploy to some of the servers and then deploy to the remaining servers after confirming all is well. </p> <p>For instance, some of the applications that I have supported had 4 application servers. We would deploy to 2 of the servers first. If the deployment went well and post-regression testing passes, then we would deploy to the remaining 2 servers. By doing things this way, it does take longer to complete the deployment. However, it ensures that you do not introduce a major failure or issue into your production environment and impact your customers. If they had deployed to the primary instances and saw that CPU spike that was mentioned, then they could have rolled back after identifying that the </p> <h2 id=conclusion>Conclusion</h2> <p>When it comes to code deployment and IT infrastructure changes, this can be a lesson that we can all learn from this. </p> <ul> <li>Test your code in the lower environment</li> <li>Simulate conditions that would be encountered in the production environment as much as possible when testing. This will give you an accurate representation of what would happen under normal use.</li> <li>Do not deploy the change to all of the servers in a single environment at the same time </li> <li>After deploying the change, be sure to confirm that everything is working as it should be. Any unexpected behaviors that result after the change should be an immediate cause for alarm and the change backed out.</li> </ul> <script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script> <ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4218270188842097 data-ad-slot=5189305512 data-ad-format=auto data-full-width-responsive=true></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div><!-- /.blog-main --> <aside class="col-md-4 blog-sidebar"> <div class="p-4 mb-3 bg-light rounded shadow"> <h4 class=font-italic>About Kenny</h4> <p class=mb-0> A software developer that builds and fixes things, and writes about the journey. </p> </div> <div class="p-4 shadow mb-3"> <h4 class=font-italic>Get Into Tech</h4> <p class=mb-0> Are you looking to get into a tech career or role? Check out the <a href=/resources>Resources</a> section for more information. Also check out my <a href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1" target=_blank> Tech Talk YouTube Channel</a> and <a href="https://www.facebook.com/profile.php?id=100089303142244" target=_blank> Tech Talk Facebook page</a> for video tutorials about software development, web development, and working with tech. </a> </p> </div> <div class="p-4 shadow mb-3"> <h4 class=font-italic>Connect with Me</h4> <ol class=list-unstyled> <li><a target=_blank href=https://github.com/almostengr>Github</a></li> <li><a target=_blank href=https://facebook.com/rhtservicesllc>Home Improvement (Facebook)</a></li> <li><a target=_blank href="https://www.youtube.com/c/RobinsonHandyandTechnologyServices?sub_confirmation=1">Home Improvement (YouTube)</a></li> <li><a target=_blank href=https://instagram.com/almostengr>Instagram</a></li> <li><a target=_blank href="https://www.youtube.com/channel/UCB7rvymUaUbbig3skv2zvCQ?sub_confirmation=1">Kenny Ram Dash Cam</a></li> <li><a target=_blank href=https://stackoverflow.com/users/12875554/almostengr>StackOverflow</a></li> <li><a target=_blank href="https://www.facebook.com/profile.php?id=100089303142244">Tech Talk (Facebook)</a></li> <li><a target=_blank href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1">Tech Talk (YouTube)</a></li> <li><a target=_blank href=https://www.tiktok.com/@almostengr>TikTok</a></li> <li><a target=_blank href=https://twitter.com/almostengr>Twitter</a></li> </ol> </div> <div class="p-4 shadow mb-3"> <script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script> <ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4218270188842097 data-ad-slot=5189305512 data-ad-format=auto data-full-width-responsive=true></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div> </aside><!-- /.blog-sidebar --> </div><!-- /.row --> </main><!-- /.container --> <footer class="blog-footer bg-dark text-light text-left"> <div class=container> <div> <a class="text-light pr-2" href=/technology>Technology</a> <a class="text-light pr-2" href=/lifestyle>Living</a> <a class="text-light pr-2" href=/projects>Projects</a> <a class="text-light pr-2" href=/resources>Get Into Tech</a> <a class="text-light pr-2" href=/services>Services</a> <a class="text-light pr-2" href=/cooking>Food</a> <a class="text-light pr-2" href=/uses>Uses</a> <a class="text-light pr-2" href=/about>About</a> <a class="text-light pr-2" href=/contact>Contact</a> <a class="text-light pr-2" href=/about/privacy>Privacy Policy</a> <a class="text-light pr-2" href=/sitemap.xml>Sitemap</a> </div> <div> <a class="text-light pr-2" target=_blank href=https://facebook.com/rhtservicesllc>Home Improvement (Facebook)</a> <a class="text-light pr-2" target=_blank href="https://www.youtube.com/c/RobinsonHandyandTechnologyServices?sub_confirmation=1">Home Improvement (YouTube)</a> <a class="text-light pr-2" target=_blank href="https://www.facebook.com/profile.php?id=100089303142244">Tech Talk (Facebook)</a> <a class="text-light pr-2" target=_blank href="https://www.youtube.com/channel/UC4xp-TEEIAL-4XtMVvfRaQw?sub_confirmation=1">Tech Talk (YouTube)</a> <a class="text-light pr-2" target=_blank href="https://www.youtube.com/channel/UCB7rvymUaUbbig3skv2zvCQ?sub_confirmation=1">Kenny Ram Dash Cam</a> </div> <div> <a class="text-light pr-2" target=_blank href=https://github.com/almostengr>Github</a> <a class="text-light pr-2" target=_blank href=https://instagram.com/almostengr>Instagram</a> <a class="text-light pr-2" target=_blank href=https://stackoverflow.com/users/12875554/almostengr>StackOverflow</a> <a class="text-light pr-2" target=_blank href=https://www.tiktok.com/@almostengr>TikTok</a> <a class="text-light pr-2" target=_blank href=https://twitter.com/almostengr>Twitter</a> </div> <div>Copyright &copy; 2010-2024 Kenny Robinson</div> <div> Created by <a class=text-light href=https://rhtservices.net target=_blank>Robinson Handy and Technology Services</a> </div> <div> Disclaimer: The opinions expressed here are those of mine and not representative of my employer or affiliates. </div> </div> </footer> </div> <script type=text/javascript src=/js/jquery.min.js></script> <script type=text/javascript src=/js/popper.min.js></script> <script type=text/javascript src=/js/bootstrap.min.js></script> </body> </html>