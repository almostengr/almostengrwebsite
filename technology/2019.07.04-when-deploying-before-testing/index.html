<!doctype html><html lang=en> <head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property=og:type content=website><meta property=og:locale content=en_US><meta property=og:site_name content="The Almost Engineer"><meta name=twitter:card content=summary><meta name=twitter:site content=@almostengr><meta name=twitter:creator content=@almostengr><meta name=description content="The blog of Kenny Robinson"><meta property=og:description content="The blog of Kenny Robinson"><meta name=twitter:description content="The blog of Kenny Robinson"><meta name=author content="Kenny Robinson, @almostengr"><title>When Deploying Before Testing | The Almost Engineer</title><meta property=og:title content="When Deploying Before Testing | The Almost Engineer"><meta name=twitter:title content="When Deploying Before Testing | The Almost Engineer"><meta property=og:type content=website><meta name=robots content="index, follow"><link href=https://thealmostengineer.com/technology/2019.07.04-when-deploying-before-testing/ rel=canonical><meta content=https://thealmostengineer.com/technology/2019.07.04-when-deploying-before-testing/ property=og:url><meta content=https://thealmostengineer.com/technology/2019.07.04-when-deploying-before-testing/ property=twitter:url><link href=/css/bootstrap.min.css rel=stylesheet><!-- Custom styles for this template --><link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel=stylesheet><link href=/css/theme.min.css rel=stylesheet><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/default.min.css><link rel=stylesheet href=/css/a11y-dark-theme.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=manifest href=/images/site.webmanifest><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-64643711-1"></script><script async>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date()); gtag('config', 'UA-64643711-1');</script></head> <body> <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark-red"> <a href=/ class="navbar-brand font-weight-bold text-uppercase">The Almost Engineer</a> <button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> <div class="collapse navbar-collapse" id=navbarCollapse> <ul class="navbar-nav mr-auto"> <li class=nav-item> <a class="nav-link text-white text-uppercase" href=/blog>Blog</a> </li> <li class=nav-item> <a class="nav-link text-white text-uppercase" href=/projects>Projects</a> </li> <li class=nav-item> <a class="nav-link text-white text-uppercase" href=/resources>Resources</a> </li> <li class=nav-item> <a class="nav-link text-white text-uppercase" href=/uses>Uses</a> </li> </ul> <form class="form-inline mt-2 mt-md-0" action=https://www.google.com/search method=GET> <input type=hidden name=q value=site:thealmostengineer.com> <input type=text name=q alt=Search placeholder="Search with Google" class="form-control mr-3"> <button class="btn btn-outline-light my-2 my-sm-0" type=submit>Search</button> </form> </div> </nav> <div class="pt-3 mt-0 bg-white"> <main role=main class=container> <div class=row> <div class="col-sm-12 col-md-9 blog-main"> <ul class=list-unstyled> <li class=list-inline-item><a href=/ >Home</a></li> <li class=list-inline-item>&raquo; <a href=..>Technology</a></li> <li class=list-inline-item>&raquo; When Deploying Before Testing</li> </ul> <h1 class=blog-post-title> </h1> <p class="text-center blog-post-meta text-secondary"> posted on 2019-07-04 in <a href=/technology>Technology</a> </p> <!-- home page listing --> <p> <ul class=list-unstyled> </ul> <ul class=list-unstyled> </ul> <ul class=list-unstyled> </ul> <ul class=list-unstyled> </ul> </p> <div class=content> <h1 id=when-deploying-before-testing>When Deploying Before Testing</h1> <p><img alt src=/images/2019.07.04-503.jpg></p> <p>As you may know, on July 3, 2019, Facebook, Instagram, Down Detector, and a number of other websites were partially or fully unavailable. Cloudflare mentioned did admit that the outage was their fault and did rectify the situation. However, it was not resolved until a number of users complained and reported images not loading. </p> <p>Cloudflare provides CDN services. CDN stands for Content Delivery Network. Content Delivery Networks are often used by high traffic websites to be able to provide you with images, video, and other online resources faster as they are located closer to where you are. </p> <p>For instance, letâ€™s say a company has their primary data center in Utah, it may take about 5 seconds for an online image request to be sent and response to be returned to a device that is on the East Coast. However with a CDN, the image that is on the Utah server, is copied to a server in Virginia. Then when the request for that same image is made from the device on the East Coast, the image is provided from the Virginia server instead of the Utah server in about 1 or 2 seconds. This is part of the reason why it is said that if you upload and image or other content online, that you will never be able to delete it. </p> <h2 id=testing-environment>Testing Environment</h2> <p>When I primarily did IT support, we were often asked to do changes that were to be deployed in the testing environment first. Not only this, but we had to provide proof that the change being implemented in the testing environment was successful and did not destroy the testing environment before performing the change in the production environment. </p> <p>There is one major difference between the testing environment and the production environment. That is that the testing environment may get about 5% of the activity that the production environment gets unless a simulation is performed. Long story short, this change may have been tested in the testing environment and the CPU spike did not occur or was not noticeable to be classified as a failure. </p> <p>This change was probably not well tested or tested at all in a lower environment. A <em>lower environment</em> is supposed to be an exact copy of the production environment. In the lower environment, you can play around or try things out without breaking the production environment. </p> <h2 id=use-an-automation-or-script>Use An Automation or Script</h2> <p>When using an automation or script to perform work, the change is less likely to be error prone. The reason being, is that most automations are tested a number of times before being rolled out. Once rolled out, they are guaranteed to work unless an unexpected situation occurs. For instance, a software dependency is not installed, thus the automation is not able to configure the software. In this circumstance, the automation should fail and roll back what activities that it has done thus far. </p> <h2 id=work-in-batches>Work in Batches</h2> <p>It was mentioned that they noticed that the CPU usage had spiked on the primary and secondary servers. Assuming that the changes were applied at the same time, indicates a bigger problem. From my support experience, we would not deploy or make changes to all the servers at the same. What we would do is deploy to some of the servers and then deploy to the remaining servers after confirming all is well. </p> <p>For instance, some of the applications that I have supported had 4 application servers. We would deploy to 2 of the servers first. If the deployment went well and post-regression testing passes, then we would deploy to the remaining 2 servers. By doing things this way, it does take longer to complete the deployment. However, it ensures that you do not introduce a major failure or issue into your production environment and impact your customers. If they had deployed to the primary instances and saw that CPU spike that was mentioned, then they could have rolled back after identifying that the </p> <h2 id=conclusion>Conclusion</h2> <p>When it comes to code deployment and IT infrastructure changes, this can be a lesson that we can all learn from this. </p> <ul> <li>Test your code in the lower environment</li> <li>Simulate conditions that would be encountered in the production environment as much as possible when testing. This will give you an accurate representation of what would happen under normal use.</li> <li>Do not deploy the change to all of the servers in a single environment at the same time </li> <li>After deploying the change, be sure to confirm that everything is working as it should be. Any unexpected behaviors that result after the change should be an immediate cause for alarm and the change backed out.</li> </ul> <!-- mobile page links --> <script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script> <ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4218270188842097 data-ad-slot=5189305512 data-ad-format=auto data-full-width-responsive=true></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div> </div><!-- /.blog-main --> <aside class="col-md-3 blog-sidebar"> <div class="p-4 mb-3 bg-light rounded"> <h4 class=font-italic>Categories</h4> <ol class=list-unstyled> <li><a href=/handyman><i class="bi bi-wrench"></i> DIY/Handyman</a></li> <li><a href=/technology><i class="bi bi-laptop"></i> Technology</a></li> <li><a href=/speaking><i class="bi bi-megaphone-fill"></i> Speaking</a></li> <li><a href=/gardening><i class="bi bi-flower1"></i> Gardening</a></li> <li><a href=/resources><i class="bi bi-bookshelf"></i> Resources</a></li> <li><a href=/projects><i class="bi bi-journal"></i> Projects</a></li> </ol> </div> <div class="p-4 mb-3 bg-light rounded"> <h4 class=font-italic>Connect With Me</h4> <ol class=list-unstyled> <li><a href=https://github.com/almostengr target=_blank><i class="bi bi-github"></i> GitHub</a></li> </svg> <li><a href=https://instagram.com/almostengr target=_blank><i class="bi bi-instagram"></i> Instagram</a></li> </svg> <li><a href=https://www.linkedin.com/in/krobinsontech target=_blank><i class="bi bi-linkedin"></i> LinkedIn</a></li> </svg> <li><a href=https://twitter.com/almostengr target=_blank><i class="bi bi-twitter"></i> Twitter</a></li> </svg> <li><a href="https://www.youtube.com/channel/UC4HCouBLtXD1j1U_17aBqig?sub_confirmation=1" target=_blank><i class="bi bi-youtube" &quot;></i> YouTube</a></li> </svg> </ol> </div> <div class="p-4 mb-3 bg-light rounded"> <h4 class=font-italic>Online Courses</h4> <ol class=list-unstyled> <li><a href="https://www.youtube.com/watch?v=iujOWWbiUP0&list=PLaAJ0fv0d9WM8E2K_Ke5As-fw626yQ3tu" target=_blank><i class></i> Drupal 8 Basics</a></li> </svg> </ol> </div> <div class="p-4 mb-3 bg-light rounded"> <script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script> <ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4218270188842097 data-ad-slot=5189305512 data-ad-format=auto data-full-width-responsive=true></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div> <div class="p-4 mb-3 bg-light rounded"> <script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script> <ins class=adsbygoogle style=display:block data-ad-client=ca-pub-4218270188842097 data-ad-slot=5189305512 data-ad-format=auto data-full-width-responsive=true></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script> </div> </aside><!-- /.blog-sidebar --> </div><!-- /.row --> </main><!-- /.container --> </div> <footer class="blog-footer bg-black container text-left"> <p class=text-center><a href=#>Back To Top</a></p> <ul class=list-unstyled> <li class="list-inline-item bg-white text-dark px-2 font-weight-bold"> SOCIAL </li> <li class=list-inline-item> <a href=https://github.com/almostengr><i class="bi bi-github"></i> GitHub</a> </li> <li class=list-inline-item> <a href=https://instagram.com/almostengr><i class="bi bi-instagram"></i> Instagram</a> </li> <li class=list-inline-item> <a href=https://www.linkedin.com/in/krobinsontech><i class="bi bi-linkedin"></i> LinkedIn</a> </li> <li class=list-inline-item> <a href=https://twitter.com/almostengr><i class="bi bi-twitter"></i> Twitter</a> </li> <li class=list-inline-item> <a href="https://www.youtube.com/channel/UC4HCouBLtXD1j1U_17aBqig?sub_confirmation=1"><i class="bi bi-youtube" &quot;></i> YouTube</a> </li> </ul> <ul class=list-unstyled> <li class="list-inline-item bg-white text-dark px-2 font-weight-bold"> LINKS </li> <li class=list-inline-item> <a href=/about><i class="bi bi-file-person-fill"></i> About</a> </li> <li class=list-inline-item> <a href=/uses><i class="bi bi-tools"></i> Uses</a> </li> <li class=list-inline-item> <a href=/blog><i class="bi bi-journal-text"></i> Blog</a> </li> <li class=list-inline-item> <a href=/contact><i class="bi bi-person-lines-fill"></i> Contact</a> </li> <li class=list-inline-item> <a href=/sitemap.xml><i class="bi bi-diagram-3"></i> Sitemap</a> </li> <li class=list-inline-item> <a href=/privacy><i class="bi bi-shield-shaded"></i> Privacy</a> </li> </ul> <p> Copyright &copy; 2015-2021 Kenny Robinson | Website built and maintained by <a href=https://rhtservices.net target=_blank>Robinson Handy and Technology Services LLC</a> </p> <p> Cookies are used on this website to track your visits, provide advertisements specific to you, and preferences by a third-party. By continuing to use this site, you agree to the use of cookies unless you have disabled them. More information this is available in the <a href=/privacy>Privacy Policy</a>. </p> </footer> <script src=https://code.jquery.com/jquery-3.5.1.slim.min.js async integrity=sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj crossorigin=anonymous></script> <script>window.jQuery || document.write('<script src="/js/vendor/jquery.slim.min.js"><\/script>')</script> <script async src=/js/bootstrap.bundle.min.js></script> <script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js></script> <script async src=/js/theme.min.js></script> <script>hljs.initHighlightingOnLoad();</script> <!-- Build Date UTC : 2021-02-13 23:58:34.398273+00:00 --> </body> </html>