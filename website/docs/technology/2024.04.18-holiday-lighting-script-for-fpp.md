<?php

define("DATE_FORMAT", "Y-M-d");


echo date("j, d-M-Y", strtotime("first wednesday 2015-12"));
echo date("j, d-M-Y", strtotime("first monday 2024-09"));
echo date("j, d-M-Y", strtotime("fourth monday k2024-04"));

// Function to get the date of the next specified day of the week in a month
function getNextWeekdayOfMonth($year, $month, $dayOfWeek, $occurrence)
{
    // Get the first day of the month
    $firstDayOfMonth = strtotime("{$year}-{$month}-01");

    // Find the first occurrence of the specified day of the week in the month
    $firstOccurrence = strtotime("{$year}-{$month}-" . ($dayOfWeek - date('N', $firstDayOfMonth) + 1));

    // If the first occurrence is in the previous month, move to the next occurrence
    if ($firstOccurrence < $firstDayOfMonth) {
        $firstOccurrence += 7 * 24 * 3600;
    }

    // Calculate the timestamp of the desired occurrence
    $timestamp = $firstOccurrence + ($occurrence - 1) * 7 * 24 * 3600;

    // Return the date of the occurrence
    return date('Y-m-d', $timestamp);
}

// Get the current year
$currentYear = date('Y');

// MLK Day, 3rd Monday in January
$mlkDay = getNextWeekdayOfMonth($currentYear, 1, 1, 3);
echo "Upcoming Holiday and Special Processing: Martin Luther King Day is on {$mlkDay}\n";

// President's Day, 3rd Monday in February
$presidentsDay = getNextWeekdayOfMonth($currentYear, 2, 1, 3);
echo "Upcoming Holiday and Special Processing: President's Day is on {$presidentsDay}\n";

// Daylight Savings Time Start, 2nd Sunday in March
$dstStart = getNextWeekdayOfMonth($currentYear, 3, 7, 2);
echo "Upcoming Special Processing: Daylight Savings Time Starts on {$dstStart}\n";

// Memorial Day, last Monday in May
$memorialDay = date('Y-m-d', strtotime("last Monday of May {$currentYear}"));
echo "Upcoming Holiday and Special Processing: Memorial Day is on {$memorialDay}\n";

// Independence Day, July 4th
$independenceDay = "{$currentYear}-07-04";
echo "Upcoming Holiday and Special Processing: Independence Day is on {$independenceDay}\n";

// Labor Day, 1st Monday in September
$laborDay = getNextWeekdayOfMonth($currentYear, 9, 1, 1);
echo "Upcoming Holiday and Special Processing: Labor Day is on {$laborDay}\n";

// Daylight Savings Time Ends, 1st Sunday in November
$dstEnd = getNextWeekdayOfMonth($currentYear, 11, 7, 1);
echo "Upcoming Special Processing: Daylight Savings Time Ends on {$dstEnd}\n";

// Veterans Day, November 11th
$veteransDay = "{$currentYear}-11-11";
echo "Upcoming Holiday and Special Processing: Veterans Day is on {$veteransDay}\n";


$currentDate = date(DATE_FORMAT);

