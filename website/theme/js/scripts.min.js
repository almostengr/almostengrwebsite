function getHeaders(){return{"Content-Type":"application/json"}}async function submitJukeboxRequest(){const e=document.getElementById("alertBody"),t=document.getElementById("alertText"),n=document.getElementById("jukeboxForm"),s=new FormData(n),o=Object.fromEntries(s);try{if(e.classList.add(dNone),-1!==songNameElement.innerText.indexOf(showOfflineMessage))throw new Error("The show is offline and not accepting requests.");const n=await fetch(jukeboxRoute,{method:"POST",headers:getHeaders(),body:JSON.stringify(o)}),s=await n.json();if(n.status>299)throw new Error(s.message);t.innerText=s.message,e.classList.remove(dangerClass),e.classList.add(successClass)}catch(n){t.innerText=n,e.classList.remove(successClass),e.classList.add(dangerClass)}e.classList.remove(dNone)}async function getAllSettings(){if(null==songNameElement)return;try{const e=await fetch(jukeboxRoute,{method:"GET",headers:getHeaders()});if(e.status>299)throw new Error(t.message);const t=await e.json(),n=document.getElementById("currentArtist"),s=document.getElementById("controllerTemp"),o=document.getElementById("nwsTemp"),a=document.getElementById("songQueue");t.forEach(e=>{let t=32,r=0;switch(e.identifier){case"currentsong":var i=e.value.split("|");songNameElement.innerText=""==i[0]?showOfflineMessage:i[0],n.innerText=null==i[1]?"":i[1];break;case"cputempc":t=getFahrenheitFromCelsius(e.value),r=roundCelsius(e.value),s.innerText=`${t} F (${r} C)`;break;case"nwstempc":t=getFahrenheitFromCelsius(e.value),r=roundCelsius(e.value),o.innerText=`${t} F (${r} C)`;break;case"queuecount":a.innerText=""==n.innerText?0:e.value}})}catch(e){songNameElement.innerText=e}const e=7e3;setTimeout(getAllSettings,e)}function getFahrenheitFromCelsius(e){const t=parseFloat(e),n=1.8*t+32;return Math.round(n)}function roundCelsius(e){const t=parseFloat(e);return Math.round(t)}const jukeboxRoute="/jukeboxapi.php",successClass="alert-success",dangerClass="alert-danger",dNone="d-none",songNameElement=document.getElementById("currentSong"),showOfflineMessage="Show is offline";getAllSettings();